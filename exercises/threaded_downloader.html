

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Threaded Web Scraper &mdash; Python 210 6.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python 210 Class Schedule" href="../class_schedule/index.html" />
    <link rel="prev" title="Mocking Mailroom" href="mailroom-mock.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4b2e83" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/UWPCE_logo_full.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Introduction to Python</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">All Exercises</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-1-introductions-and-setting-up-your-environment">Lesson 1: Introductions and Setting up your Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-2-basic-python-and-functions">Lesson 2: Basic Python and Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-3-booleans-sequences-iteration-and-strings">Lesson 3: Booleans, Sequences, Iteration, and Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-4-dictionaries-sets-and-files">Lesson 4: Dictionaries, Sets, and Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-5-exceptions-modules-and-comprehensions">Lesson 5: Exceptions, Modules, and Comprehensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-6-unit-testing-and-advanced-argument-passing">Lesson 6: Unit Testing and Advanced Argument Passing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-7-intro-to-object-oriented-programing">Lesson 7: Intro to Object Oriented Programing</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-8-properties-and-magic-methods">Lesson 8: Properties and Magic Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-9-multiple-inheritance">Lesson 9: Multiple Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#lesson-10-catch-up">Lesson 10: Catch up</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#extra-exercises">Extra Exercises</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rot13.html">ROT13</a></li>
<li class="toctree-l3"><a class="reference internal" href="lambda_magic.html">lambda and keyword Magic</a></li>
<li class="toctree-l3"><a class="reference internal" href="sparse_array.html">Sparse Array Exercise</a></li>
<li class="toctree-l3"><a class="reference internal" href="context-managers-exercise.html">A Couple Handy Context Managers</a></li>
<li class="toctree-l3"><a class="reference internal" href="mailroom-pkg.html">Mailroom – as a Python Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="trapezoid.html">Trapezoidal Rule</a></li>
<li class="toctree-l3"><a class="reference internal" href="context-managers-exercise.html">A Couple Handy Context Managers</a></li>
<li class="toctree-l3"><a class="reference internal" href="mailroom-decorator.html">Mailroom – Decoratoring it</a></li>
<li class="toctree-l3"><a class="reference internal" href="mailroom-meta.html">Mailroom – metaprogramming it!</a></li>
<li class="toctree-l3"><a class="reference internal" href="mailroom-mock.html">Mocking Mailroom</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Threaded Web Scraper</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#a-queue">A Queue?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hints">Hints</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/index.html">Python 210 Class Schedule</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Python 210</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">All Exercises</a> &raquo;</li>
        
      <li>Threaded Web Scraper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/exercises/threaded_downloader.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="threaded-web-scraper">
<span id="exercise-downloader"></span><h1>Threaded Web Scraper<a class="headerlink" href="#threaded-web-scraper" title="Permalink to this headline">¶</a></h1>
<p>If you have a lot of web sites (or web services) to hit at once, you may find that you’re waiting a long time for each request to return.</p>
<p>In that case, your computer isn’t doing much, and it could be waiting on multiple requests all at once.</p>
<p>In the examples, we had a news site scraper that used asyncio to asynchronously gather a bunch of data.</p>
<p>That approach worked well. But it was only about 100 or so simultaneous requests. Async works great for that many, but when it really shines is when you have thousands of (mostly sleeping) connections.</p>
<p>Another option that works well for tens to hundreds of simultaneous  connections is threading. Threading works well for this sort of thing as well, because the GIL isn’t a problem – the GIL is released when the system is waiting for a connection to return</p>
<p>So your job is to write a version of the newsAPI scraper that uses threads, instead.</p>
<p>Does is run faster or slower than the async version?</p>
<p>Did you find it easier or harder to write / understand the code?</p>
<div class="section" id="a-queue">
<h2>A Queue?<a class="headerlink" href="#a-queue" title="Permalink to this headline">¶</a></h2>
<p>You will need a way to launch a bunch of threads at once, but probably not one for each request you want to make – that could be a lot of threads! In this case, 100 or so threads would probably work OK, but if you want the code to be extensible to larger numbers, you may want to pre-define a maximum number of threads in a thread pool.</p>
<p>Then you’ll want to use a job Queue – and then launch a handful of threads to process those jobs.</p>
<p>Experiment a bit – how many threads give you maximum performance?</p>
</div>
<div class="section" id="hints">
<h2>Hints<a class="headerlink" href="#hints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="making-requests">
<h3>Making requests<a class="headerlink" href="#making-requests" title="Permalink to this headline">¶</a></h3>
<p>Python has a built-in client http lib (urllib). But almost everyone uses the “requests” package:</p>
<p><a class="reference external" href="http://docs.python-requests.org/">Requests: HTTP for Humans</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install requests
</pre></div>
</div>
<p>Should do it.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../class_schedule/index.html" class="btn btn-neutral float-right" title="Python 210 Class Schedule" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mailroom-mock.html" class="btn btn-neutral float-left" title="Mocking Mailroom" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, University of Washington, Natasha Aleksandrova, Christopher Barker, Brian Dorsey, Cris Ewing, Christy Heaton, Jon Jacky, Maria McKinley, Andy Miles, Rick Riehle, Joseph Schilz, Joseph Sheedy, Hosung Song. Creative Commons Attribution-ShareAlike 4.0 license

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>